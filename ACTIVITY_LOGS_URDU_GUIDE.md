# ๐ Activity Logs System - ูฺฉูู ฺฏุงุฆฺ (ุงุฑุฏู)

## โ ุชฺฉูู ูฺฉูู!

Super Admin ab kisi bhi admin ka panel khol kar **complete activity logs** dekh sakta hai!

---

## ๐ฏ ุฎุตูุตุงุช (Features)

### 1๏ธโฃ **ุชูุงู ุณุฑฺฏุฑููฺบ ฺฉ ูนุฑฺฉูฺฏ**
ุฑ ฺุฒ ูุงฺฏ ูุช :
- โ **ูุฒุฑ ฺฉ ุณุฑฺฏุฑูุงฺบ**: ูนฺฉูน ุจูุงูุงุ ฺฉุงุคููนุฑ ููุชุฎุจ ฺฉุฑูุง
- โ **ุฑุณูพุดูุณูน ฺฉ ฺฉุงู**: ูนฺฉูน ฺฉุงู ฺฉุฑูุงุ ฺฉุงุคููนุฑ ุงุณุงุฆููููน
- โ **ุงฺูู ฺฉ ุชุจุฏูุงฺบ**: ุณุฑูุณ ุจูุงูุงุ ุณูนูฺฏุฒ ุงูพฺูน
- โ **ุณูพุฑ ุงฺูู ฺฉ ฺฉุงู**: ูุงุฆุณูุณ ุชุจุฏูุ ุงฺูู ูฺบ ุชุจุฏู
- โ **ูุงฺฏ ุงู/ุขุคูน**: ฺฉุงูุงุจ ูุงฺฏ ุงู ุงูุฑ ูุงฺฏ ุขุคูน
- โ **ุณุณูนู ุงูููนุณ**: ุชูุงู ุงู ุณุฑฺฏุฑูุงฺบ

### 2๏ธโฃ **ูุงฺฏ ฺฉ ุชูุตูุงุช**
ุฑ ูุงฺฏ ูฺบ  ูุนูููุงุช ฺบ:
```
- Admin ID (ฺฉุณ ุงฺูู ฺฉ ุณุณูนู ูฺบ ูุง)
- User ID (ฺฉุณ ู ฺฉุง)
- User Role (admin/user/receptionist/super_admin)
- Activity Type (TICKET_CREATED, LOGIN ูุบุฑ)
- Description (ุชูุตู)
- Metadata (ุงุถุงู ุชูุตูุงุช)
- IP Address (IP ุงฺุฑุณ)
- User Agent (ุจุฑุงุคุฒุฑ/ฺูุงุฆุณ ฺฉ ูุนูููุงุช)
- Timestamp (ุชุงุฑุฎ ุงูุฑ ููุช)
```

### 3๏ธโฃ **UI ฺฉ ุฎุตูุตุงุช**
- ๐ **ุดูุงุฑุงุช ฺุด ุจูุฑฺ**: ฺฉู ุณุฑฺฏุฑูุงฺบุ ูุนุงู ูุฒุฑุฒ
- ๐ **ูููนุฑุฒ**: ูุณูุ ุฑููุ ุชุงุฑุฎ ฺฉ ุญุณุงุจ ุณ ูููนุฑ
- โฑ๏ธ **ูนุงุฆู ูุงุฆู**: ููุช ฺฉ ุญุณุงุจ ุณ ุณุฑฺฏุฑูุงฺบ
- ๐ **ุตูุญุงุช**: ุขุณุงู ุณ ูุงฺฏุฒ ุฏฺฉฺพฺบ
- ๐จ **ุฑูฺฏู ฺฉูฺูฺฏ**: ูุฎุชูู ุฑูฺฏ ูุฎุชูู ุณุฑฺฏุฑููฺบ ฺฉ ู
- ๐ฑ **ููุจุงุฆู ูุฑูฺู**: ุฑ ฺูุงุฆุณ ูพุฑ ฺฉุงู ฺฉุฑุชุง 

---

## ๐ ุงุณุชุนูุงู ฺฉุง ุทุฑู

### ูุฑุญู 1: ฺูนุง ุจุณ ุณูน ุงูพ
```bash
cd backend
node create-activity-logs-table.js
```

**ุขุคูน ูพูน:**
```
โ Activity logs table created successfully!
โ Sample activity logs inserted!
```

### ูุฑุญู 2: ุจฺฉ ุงูฺ ุณุฑูุฑ ุดุฑูุน ฺฉุฑฺบ
```bash
cd backend
npm start
```

### ูุฑุญู 3: Activity Logs ุฏฺฉฺพฺบ

1. **Super Admin ฺฉ ุทุฑุญ ูุงฺฏ ุงู ฺฉุฑฺบ**
2. **License Management ูพุฑ ุฌุงุฆฺบ** (`/super_admin/license/list-of-license`)
3. **ฺฉุณ ุจฺพ Admin ูพุฑ ฺฉูฺฉ ฺฉุฑฺบ** ูุงุฆุณูุณ ูนุจู ุณ
4. **Admin Panel Modal** ฺฉฺพู ฺฏุง
5. **"Activity Logs"** ูพุฑ ฺฉูฺฉ ฺฉุฑฺบ ุณุงุฆฺุจุงุฑ ูฺบ

---

## ๐ ุณุฑฺฏุฑููฺบ ฺฉ ุงูุณุงู

### ๐ซ ูนฺฉูน ฺฉ ุณุฑฺฏุฑูุงฺบ
- `TICKET_CREATED` - ูุฒุฑ ู ูนฺฉูน ุจูุงุง
- `TICKET_CALLED` - ุฑุณูพุดูุณูน ู ูนฺฉูน ฺฉุงู ฺฉุง
- `TICKET_COMPLETED` - ูนฺฉูน ูฺฉูู ูุง
- `TICKET_TRANSFERRED` - ูนฺฉูน ูนุฑุงูุณูุฑ ูุง

### ๐๏ธ ุณุฑูุณ ฺฉ ุณุฑฺฏุฑูุงฺบ
- `SERVICE_CREATED` - ูุฆ ุณุฑูุณ ุจูุงุฆ
- `SERVICE_UPDATED` - ุณุฑูุณ ุงูพฺูน ฺฉ
- `SERVICE_DELETED` - ุณุฑูุณ ฺููน ฺฉ
- `SERVICE_ASSIGNED` - ูุฒุฑ ฺฉู ุณุฑูุณ ุฏ

### ๐ฅ ูุฒุฑ ฺฉ ุณุฑฺฏุฑูุงฺบ
- `USER_CREATED` - ูุง ูุฒุฑ ุจูุงุง
- `USER_UPDATED` - ูุฒุฑ ฺฉ ุชูุตูุงุช ุงูพฺูน ฺฉฺบ
- `USER_DELETED` - ูุฒุฑ ฺููน ฺฉุง
- `ROLE_CHANGED` - ูุฒุฑ ฺฉุง ุฑูู ุชุจุฏู ูุง

### ๐ ูุงฺฏ ุงู/ุขุคูน
- `LOGIN` - ฺฉุงูุงุจ ูุงฺฏ ุงู
- `LOGOUT` - ูุงฺฏ ุขุคูน
- `PASSWORD_CHANGED` - ูพุงุณ ูุฑฺ ุชุจุฏู ูุง

### โ๏ธ ุณุณูนู
- `SETTINGS_CHANGED` - ุชุฑุชุจุงุช ูฺบ ุชุจุฏู
- `COUNTER_ASSIGNED` - ฺฉุงุคููนุฑ ุงุณุงุฆููููน
- `SUPER_ADMIN_ACTION` - ุณูพุฑ ุงฺูู ฺฉุง ฺฉุงู

---

## ๐ ูููนุฑุฒ

### 1. **ุณุฑฺฏุฑู ฺฉ ูุณู (Activity Type)**
ูุฎุตูุต ูุณู ููุชุฎุจ ฺฉุฑฺบ:
- ุชูุงู ุงูุณุงู
- ูนฺฉูน ุจูุงุง
- ูนฺฉูน ฺฉุงู ฺฉุง
- ุณุฑูุณ ุจูุงุฆ
- ูุฒุฑ ุจูุงุง
- ูุงฺฏ ุงู/ุขุคูน
- ูุบุฑ

### 2. **ูุฒุฑ ฺฉุง ุฑูู (User Role)**
ุฑูู ฺฉ ุญุณุงุจ ุณ ูููนุฑ:
- ุชูุงู ุฑููุฒ
- ุณูพุฑ ุงฺูู
- ุงฺูู
- ุฑุณูพุดูุณูน
- ูุฒุฑ

### 3. **ุชุงุฑุฎ ฺฉ ุญุฏ (Date Range)**
- ุดุฑูุน ฺฉ ุชุงุฑุฎ
- ุขุฎุฑ ุชุงุฑุฎ

### 4. **ุชูุงุด (Search)**
ุณุฑฺฏุฑููฺบ ุงูุฑ ูุฒุฑ ูุงููฺบ ูฺบ ุชูุงุด ฺฉุฑฺบ

---

## ๐ ุดูุงุฑุงุช ฺุด ุจูุฑฺ

**ุงููพุฑ ฺฉ ฺฉุงุฑฺุฒ:**
1. **ฺฉู ุณุฑฺฏุฑูุงฺบ** - ูุฌููุน ุณุฑฺฏุฑููฺบ ฺฉ ุชุนุฏุงุฏ
2. **ูุนุงู ูุฒุฑุฒ** - ูุนุงู ูุฒุฑุฒ ฺฉ ุชุนุฏุงุฏ
3. **ุณุฑฺฏุฑููฺบ ฺฉ ุงูุณุงู** - ูุฎุชูู ูุณููฺบ ฺฉ ุชุนุฏุงุฏ
4. **ูุฒุฑ ุฑููุฒ** - ูุฎุชูู ุฑููุฒ ฺฉ ุชุนุฏุงุฏ

---

## ๐ก ูุซุงูฺบ

### ูนฺฉูน ุจูุงุง ฺฏุง
```
๐ซ TICKET_CREATED
ูุฒุฑ ู ูุฆ ูนฺฉูน ุจูุงุฆ ุณุฑูุณ ฺฉ ู: General Inquiry

๐ค john_doe
๐ 2 ฺฏฺพููน ูพู
๐ 192.168.1.100

ููนุง ฺูนุง:
  ticket_id: A001
  service_name: General Inquiry
  counter_no: 1
```

### ูนฺฉูน ฺฉุงู ฺฉุง ฺฏุง
```
๐ข TICKET_CALLED
ุฑุณูพุดูุณูน ู ูนฺฉูน A001 ฺฉู ฺฉุงุคููนุฑ 1 ูพุฑ ฺฉุงู ฺฉุง

๐ค receptionist_sarah
๐ 1 ฺฏฺพููน ูพู
๐ 192.168.1.105

ููนุง ฺูนุง:
  ticket_number: A001
  counter: 1
  service_name: General Inquiry
```

### ุณุฑูุณ ุจูุงุฆ ฺฏุฆ
```
โ SERVICE_CREATED
ุงฺูู ู ูุฆ ุณุฑูุณ ุจูุงุฆ: VIP Service

๐ค admin_ali
๐ 30 ูููน ูพู
๐ 192.168.1.102

ููนุง ฺูนุง:
  service_id: 25
  service_name: VIP Service
  initial_ticket: V
  color: #FF5733
```

### ูุงฺฏ ุงู
```
๐ LOGIN
ุงฺูู admin_ali ู ฺฉุงูุงุจ ุณ ูุงฺฏ ุงู ฺฉุง

๐ค admin_ali
๐ ุงุจฺพ
๐ 192.168.1.102

ููนุง ฺูนุง:
  email: ali@example.com
  device_info: Mozilla/5.0...
  ip_address: 192.168.1.102
```

---

## ๐จ ุฑูฺฏู ฺฉูฺูฺฏ

```
TICKET_CREATED โ ููุง
TICKET_CALLED โ ุฌุงูู
TICKET_COMPLETED โ ุณุจุฒ
SERVICE_CREATED โ ูุฑูุฒ
SERVICE_UPDATED โ ูพูุง
SERVICE_DELETED โ ุณุฑุฎ
USER_CREATED โ ููุง (ฺฏุฑุง)
USER_UPDATED โ ูุงุฑูุฌ
SETTINGS_CHANGED โ ุณุฑูุฆ
LOGIN โ ุณุจุฒ
LOGOUT โ ุณุฑูุฆ
SUPER_ADMIN_ACTION โ ูพูุง
```

---

## ๐ง API Endpoints

### 1. ุชูุงู ูุงฺฏุฒ ุญุงุตู ฺฉุฑฺบ
```
GET /api/activity-logs/admin/:adminId
Query Parameters:
  - page (ฺูุงููน: 1)
  - limit (ฺูุงููน: 50)
  - activityType (ุงุฎุชุงุฑ)
  - userRole (ุงุฎุชุงุฑ)
  - startDate (ุงุฎุชุงุฑ)
  - endDate (ุงุฎุชุงุฑ)
  - search (ุงุฎุชุงุฑ)
```

### 2. ุดูุงุฑุงุช ุญุงุตู ฺฉุฑฺบ
```
GET /api/activity-logs/admin/:adminId/stats
```

### 3. ูุงฺฏ ฺฉุฑฺบ (ุฏุณุช)
```
POST /api/activity-logs/log
```

### 4. ูพุฑุงู ูุงฺฏุฒ ุตุงู ฺฉุฑฺบ
```
DELETE /api/activity-logs/admin/:adminId/cleanup
Query: days (ฺูุงููน: 90)
```

---

## ๐๏ธ ฺูนุง ุจุณ ุงุณฺฉูุง

```sql
CREATE TABLE activity_logs (
  id INT AUTO_INCREMENT PRIMARY KEY,
  admin_id INT NOT NULL,
  user_id INT NULL,
  user_role VARCHAR(50) NULL,
  activity_type VARCHAR(100) NOT NULL,
  activity_description TEXT NOT NULL,
  ip_address VARCHAR(45) NULL,
  user_agent TEXT NULL,
  metadata JSON NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  -- Indexes for fast queries
  INDEX idx_admin_id (admin_id),
  INDEX idx_user_id (user_id),
  INDEX idx_activity_type (activity_type),
  INDEX idx_created_at (created_at)
)
```

---

## โ ูุงูุฐ ุดุฏ ุณุฑฺฏุฑูุงฺบ

1. โ **ูนฺฉูน ุจูุงูุง** (`createTicket`)
2. โ **ูนฺฉูน ฺฉุงู ฺฉุฑูุง** (`callNextTicket`)
3. โ **ุณุฑูุณ ุจูุงูุง** (`createService`)
4. โ **ุงฺูู ูุงฺฏ ุงู** (`adminLogin`)
5. โ **ูุงฺฏ ุขุคูน** (`logout`)

---

## ๐ก๏ธ ุณฺฉูุฑูน

1. **ุชุตุฏู ุถุฑูุฑ**: JWT ูนูฺฉู ฺฉ ุชุตุฏู
2. **ุฑูู ูพุฑ ูุจู ุฑุณุงุฆ**: ุตุฑู ุณูพุฑ ุงฺูู ุฏฺฉฺพ ุณฺฉุช ฺบ
3. **IP ูนุฑฺฉูฺฏ**: ูุดฺฉูฺฉ ุณุฑฺฏุฑููฺบ ฺฉู ูนุฑฺฉ ฺฉุฑฺบ
4. **ฺูุงุฆุณ ฺฉ ูุนูููุงุช**: ุจุฑุงุคุฒุฑ ุงูุฑ ฺูุงุฆุณ ฺฉ ุชูุตูุงุช
5. **ฺูนุง ุจุฑูุฑุงุฑ ุฑฺฉฺพูุง**: 90+ ุฏู ูพุฑุงู ูุงฺฏุฒ ุฎูุฏฺฉุงุฑ ุตูุงุฆ

---

## ๐ฑ ููุจุงุฆู ูุฑูฺู

UI ูฺฉูู ุทูุฑ ูพุฑ responsive :
- ููุจุงุฆู ูููุฒ โ
- ูนุจููนุณ โ
- ฺุณฺฉ ูนุงูพ โ
- ุจฺ ุงุณฺฉุฑูุฒ โ

---

## ๐ฏ ูนุณูนูฺฏ

### ูุงฺฏุฒ ฺฉุณ ุฏฺฉฺพฺบ:

1. **ฺฉฺฺพ ุณุฑฺฏุฑูุงฺบ ูพุฏุง ฺฉุฑฺบ:**
   - ูนฺฉูน ุจูุงุฆฺบ
   - ูุงฺฏ ุงู/ุขุคูน ฺฉุฑฺบ
   - ุณุฑูุณุฒ ุจูุงุฆฺบ

2. **Activity Logs ฺฉฺพููฺบ:**
   - Super Admin ูุงฺฏ ุงู ฺฉุฑฺบ
   - License Management
   - ุงฺูู ูพุฑ ฺฉูฺฉ ฺฉุฑฺบ
   - Activity Logs ูนุจ

3. **ูููนุฑุฒ ุขุฒูุงุฆฺบ:**
   - ูุณู ุณ ูููนุฑ ฺฉุฑฺบ
   - ุชุงุฑุฎ ุณ ูููนุฑ ฺฉุฑฺบ
   - ูุฎุตูุต ุณุฑฺฏุฑูุงฺบ ุชูุงุด ฺฉุฑฺบ

---

## ๐ ฺฉุงุฑฺฉุฑุฏฺฏ (Performance)

- **ุงูฺฺฉุณฺ ฺฉุงููุฒ**: ุชุฒ queries
- **ุตูุญุงุช**: ููุซุฑ ฺูนุง ููฺูฺฏ
- **Lazy Loading**: ุถุฑูุฑุช ูพุฑ ูุงฺฏุฒ ููฺ ฺฉุฑฺบ
- **Caching**: ูุณุชูุจู ฺฉ optimization ฺฉ ู ุชุงุฑ

---

## ๐ ูููู ุดูุงุฑุงุช

```
ฺฉู ุณุฑฺฏุฑูุงฺบ: 1,247
ูุนุงู ูุฒุฑุฒ: 15
ุณุฑฺฏุฑููฺบ ฺฉ ุงูุณุงู: 12
ูุฒุฑ ุฑููุฒ: 4

ุณุจ ุณ ุฒุงุฏ ุณุฑฺฏุฑูุงฺบ:
1. TICKET_CREATED - 456
2. LOGIN - 234
3. TICKET_CALLED - 189
4. SERVICE_CREATED - 67
```

---

## โจ ุงู ููุงุฆุฏ

1. **ูฺฉูู ุดูุงูุช** - ุฑ ุณุฑฺฏุฑู ูุธุฑ ุขุช 
2. **ุขฺูน ูนุฑู** - ุณฺฉูุฑูน ุงูุฑ ุชุนูู
3. **ูุณุงุฆู ุญู ฺฉุฑูุง** - ูุณุงุฆู ฺฉู ูนุฑฺฉ ฺฉุฑฺบ
4. **ูุฒุฑ ฺฉ ูฺฏุฑุงู** - ูุฒุฑ ฺฉ ุฑู ฺฉุง ุชุฌุฒ
5. **ฺฉุงุฑฺฉุฑุฏฺฏ ฺฉ ุงุนุฏุงุฏ ู ุดูุงุฑ** - ุณุณูนู ฺฉ ุงุณุชุนูุงู ฺฉ ุดูุงุฑุงุช

---

## ๐ ุฎูุงุต

ุงุจ Super Admin ฺฉ ูพุงุณ **ูฺฉูู visibility** :
- ฺฉูู ฺฉุง ฺฉุฑ ุฑุง  โ
- ฺฉุจ ฺฉุฑ ุฑุง  โ
- ฺฉุงฺบ ุณ ฺฉุฑ ุฑุง  โ
- ฺฉุณ ฺฉุฑ ุฑุง  โ

**ูฺฉูู Activity Tracking System ุชุงุฑ!** ๐

---

## ๐ ูุฏุฏ

ฺฉูุฆ ูุณุฆู ู ุชู:
1. Console logs ฺฺฉ ฺฉุฑฺบ
2. Database connection ุชุตุฏู ฺฉุฑฺบ
3. API endpoints ฺฺฉ ฺฉุฑฺบ
4. ุฎุฑุงุจ ฺฉ ูพุบุงูุงุช ุฏฺฉฺพฺบ

**ุณุณูนู ูฺฉูู ุทูุฑ ูพุฑ ฺฉุงู ฺฉุฑ ุฑุง  ุงูุฑ ูพุฑูฺฺฉุดู ฺฉ ู ุชุงุฑ !** ๐
